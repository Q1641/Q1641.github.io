import{V as B}from"./VueTable-961a399a.js";import{_ as I,r as g,f as T,o as d,c as u,d as c,u as l,F as b,i as P,t as f,g as k,p as A,h as x}from"./index-d2bcbd4b.js";const j=i=>(A("data-v-b7e09a8c"),i=i(),x(),i),C=j(()=>c("h1",null,"PARCEL PENDING TO BASES",-1)),S={id:"nav"},G=["value"],N=!0,D={__name:"PendingToBase",setup(i){var r={},m={},n=g(0);const p=g(null);var t=0,s=[];function _(){s[t]=p.value.getParcels();for(var e=[],o=document.getElementById("select_base").value,a=0;a<s.length;a++)for(var h=0;h<s[a].length;h++)e.push(s[a][h]);fetch("http://localhost:8080/parcel/to-transaction-base",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:document.cookie},body:JSON.stringify({parcelIDs:e,nextBase:o})}).then(v=>v.json()).then(v=>console.log(JSON.stringify(v.body)))}function y(){document.getElementById("prev").disabled=!0,document.getElementById("next").disabled=!0,s[t]=p.value.getParcels(),t=t+1,fetch("http://localhost:8080/parcel/to-transaction-base?page="+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:document.cookie}}).then(e=>e.json()).then(e=>{e.parcels.length!=0?(r=e,n.value=n.value+1,document.getElementById("prev").disabled=!1,document.getElementById("next").disabled=!1):(alert("no more data!"),t-=1,t!=0&&(document.getElementById("prev").disabled=!1))})}function E(){document.getElementById("prev").disabled=!0,document.getElementById("next").disabled=!0,s[t]=p.value.getParcels(),t=t-1,fetch("http://localhost:8080/parcel/to-transaction-base?page="+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:document.cookie}}).then(e=>e.json()).then(e=>{r=e,n.value=n.value+1,t!=0&&(document.getElementById("prev").disabled=!1),document.getElementById("next").disabled=!1})}return T(()=>{fetch("http://localhost:8080/parcel/to-transaction-base?page=0",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:document.cookie}}).then(e=>e.json()).then(e=>{r=e,m=e,n.value=n.value+1})}),(e,o)=>(d(),u(b,null,[C,c("div",S,[c("button",{id:"next",onClick:o[0]||(o[0]=a=>y())},"NEXT PAGE"),c("button",{disabled:"",id:"prev",onClick:o[1]||(o[1]=a=>E())},"PREV PAGE"),c("button",{onClick:o[2]||(o[2]=a=>_())},"DELIVER TO BASE"),(d(),u("select",{id:"select_base",key:l(n).value},[(d(!0),u(b,null,P(l(m).bases,a=>(d(),u("option",{value:a._id},f(a.baseLocation),9,G))),256))]))]),c("h2",null,"Current page: "+f(l(t)+1),1),(d(),k(B,{key:l(n).value,ref_key:"table",ref:p,data:l(r).parcels,select:N,selected:l(s)},null,8,["data","selected"]))],64))}},z=I(D,[["__scopeId","data-v-b7e09a8c"]]);export{z as default};
