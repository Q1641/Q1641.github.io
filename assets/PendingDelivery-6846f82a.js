import{V as f}from"./VueTable-961a399a.js";import{_ as E,r as u,f as y,o as v,c as _,d as s,t as b,u as r,g as I,F as P,p as B,h as k}from"./index-d2bcbd4b.js";const A=c=>(B("data-v-8bc01e48"),c=c(),k(),c),j=A(()=>s("h1",null,"PARCEL PENDING DELIVERY",-1)),C={id:"nav"},T=!0,x={__name:"PendingDelivery",setup(c){var d={},a=u(0);const i=u(null);var t=0,o=[];function h(){o[t]=i.value.getParcels();for(var e=[],n=0;n<o.length;n++)for(var l=0;l<o[n].length;l++)e.push(o[n][l]);fetch("http://localhost:8080/parcel/to-receiver/in-queue",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:document.cookie},body:JSON.stringify({parcelIDs:e})}).then(p=>p.json()).then(p=>{console.log(JSON.stringify(p.body))})}function m(){document.getElementById("prev").disabled=!0,document.getElementById("next").disabled=!0,o[t]=i.value.getParcels(),t=t+1,fetch("http://localhost:8080/parcel/to-receiver/in-queue?page="+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:document.cookie}}).then(e=>e.json()).then(e=>{e.parcels.length!=0?(d=e,a.value=a.value+1,document.getElementById("prev").disabled=!1,document.getElementById("next").disabled=!1):(alert("no more data!"),t-=1,t!=0&&(document.getElementById("prev").disabled=!1))})}function g(){document.getElementById("prev").disabled=!0,document.getElementById("next").disabled=!0,o[t]=i.value.getParcels(),t=t-1,fetch("http://localhost:8080/parcel/to-receiver/in-queue?page="+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:document.cookie}}).then(e=>e.json()).then(e=>{d=e,a.value=a.value+1,t!=0&&(document.getElementById("prev").disabled=!1),document.getElementById("next").disabled=!1})}return y(()=>{fetch("http://localhost:8080/parcel/to-receiver/in-queue?page=0",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:document.cookie}}).then(e=>e.json()).then(e=>{d=e,a.value=a.value+1})}),(e,n)=>(v(),_(P,null,[j,s("div",C,[s("button",{id:"next",onClick:n[0]||(n[0]=l=>m())},"NEXT PAGE"),s("button",{disabled:"",id:"prev",onClick:n[1]||(n[1]=l=>g())},"PREV PAGE"),s("button",{onClick:n[2]||(n[2]=l=>h())},"DELIVER SELECTED PARCELS")]),s("h2",null,"Current page: "+b(r(t)+1),1),(v(),I(f,{key:r(a).value,ref_key:"table",ref:i,data:r(d).parcels,select:T,selected:r(o)},null,8,["data","selected"]))],64))}},G=E(x,[["__scopeId","data-v-8bc01e48"]]);export{G as default};
